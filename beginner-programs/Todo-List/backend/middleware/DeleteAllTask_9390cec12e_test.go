// Test generated by RoostGPT for test roost-test using AI Type Azure Open AI and AI Model roost-gpt4-32k

package middleware_test

import (
    "net/http"
    "net/http/httptest"
    "strings"
    "testing"

    "github.com/tannergabriel/learning-go/beginner-programs/todo-list/backend/models"
    "github.com/tannergabriel/learning-go/beginner-programs/todo-list/backend/middleware"

)

func TestDeleteAllTask(t *testing.T) {
    t.Run("test making a delete all task request", func(t *testing.T) {
        req, err := http.NewRequest("DELETE", "/DeleteAllTask", nil)
        if err != nil {
            t.Fatal(err)
        }
        rr := httptest.NewRecorder()
        handler := http.HandlerFunc(middleware.DeleteAllTask)

        handler.ServeHTTP(rr, req)

        if status := rr.Code; status != http.StatusOK {
            t.Errorf("handler returned wrong status code: got %v want %v",
                status, http.StatusOK)
        }

        expected := `{"Count":2}`
        if rr.Body.String() != expected {
            t.Errorf("handler returned unexpected body: got %v want %v",
                rr.Body.String(), expected)
        }
    })
}
